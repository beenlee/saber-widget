<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>FileUpload</title>
    <script src="http://s1.bdstatic.com/r/www/cache/ecom/esl/1-8-2/esl.js"></script>
    <script>
    require.config({
        'baseUrl': '../src',
        'paths': {},
        'packages': [
            {
                'name': 'saber-lang',
                'location': '../dep/saber-lang/1.0.0/src',
                'main': 'main'
            },
            {
                'name': 'saber-emitter',
                'location': '../dep/saber-emitter/1.0.0/src',
                'main': 'emitter'
            },
            {
                'name': 'saber-dom',
                'location': '../dep/saber-dom/1.0.0/src',
                'main': 'main'
            },
            {
                'name': 'saber-matchmedia',
                'location': '../dep/saber-matchmedia/1.0.0/src',
                'main': 'main'
            },
            {
                'name': 'saber-tap',
                'location': '../dep/saber-tap/1.0.0/src',
                'main': 'tap'
            },
            {
                'name': 'saber-widget',
                'location': '../../src',
                'main': 'main'
            },
            {
                'name': 'saber-ajax',
                'location': '../dep/saber-ajax/1.0.0/src',
                'main': 'ajax'
            },
            {
                'name': 'saber-promise',
                'location': '../dep/saber-promise/1.0.0/src',
                'main': 'promise'
            },
            {
                'name': 'hammer',
                'location': '../dep/hammer/1.1.3/src',
                'main': 'hammer'
            },
            {
                'name': 'saber-string',
                'location': '../dep/saber-string/1.0.0/src',
                'main': 'main'
            },
            {
                'name': 'saber-run',
                'location': '../dep/saber-run/1.0.0/src',
                'main': 'main'
            },
            {
                'name': 'saber-scroll',
                'location': '../dep/saber-scroll/1.0.0/src',
                'main': 'main'
            }
        ]
    });
    </script>

    <link rel="stylesheet" href="demo.css">
</head>

<body>
<nav class="ui-bar" data-ui="primary header">
    <a href="../" class="ui-btn" data-ui="primary">← 返回</a>
    <h1 data-ui="title">FileUpload - Saber UI</h1>
    <a href="https://github.com/ecomfe/saber-widget" class="ui-btn" data-ui="primary">主页</a>
</nav>
<section>
    <div id="test"></div>
    <div id="log"></div>
</section>
<script>
   require(
        [
            'saber-widget',
            'saber-widget/FileUpload'
        ],
        function(widget) {
            var logElement = document.getElementById('log');
            function log(content) {
                logElement.innerHTML += content + '<br>';
            }
            function clearLog() {
                logElement.innerHTML = '';
            }
            var fileupload = widget.fileUpload(
                document.getElementById('test'),
                {
                    action: '/fileupload/upload.php'
                }
            );
            fileupload.on('start', function(e, data) {
                clearLog();
                log('start');
            });
            fileupload.on('progress', function(e, data) {
                log('progress: ' + data);
            });
            fileupload.on('end', function(e, data) {
                log('end');
            });
            fileupload.on('done', function(e, data) {
                log('done: ' + JSON.stringify(data));
            });
            fileupload.on('fail', function(e, data) {
                log('fail: ' + JSON.stringify(data));
            });
        }
    );
</script>
</body>
</html>
